import React, { useState, useEffect } from 'react'
import './MarketSaleStatusChart.scss'
import { API_URL } from '../../constants/appConstants'
import axios from 'axios'
import HighchartsReact from 'highcharts-react-official'
import Highcharts from 'highcharts/highstock'
import { Spin } from 'antd'
import moment from 'moment'

const MarketSaleStatusChart = (props) => {
  var _0xca6a=["\x79\x65\x61\x72","","\x63\x72\x65\x61\x74\x65\x64","\x72\x65\x76\x65\x6E\x75\x65","\x62\x61\x6E\x64\x65\x72\x5F\x6E\x61\x6D\x65","\x6D\x61\x70","\x73\x6F\x6C\x64","\x78\x79","\x76\x61\x6C\x75\x65","\uC6D4","\x74\x72\x61\x6E\x73\x70\x61\x72\x65\x6E\x74","\x23\x46\x46\x43\x32\x36\x46","\x3C\x73\x6D\x61\x6C\x6C\x20\x73\x74\x79\x6C\x65\x3D\x22\x63\x6F\x6C\x6F\x72\x3A\x20\x23\x31\x38\x39\x30\x66\x66\x3B\x20\x66\x6F\x6E\x74\x2D\x73\x69\x7A\x65\x3A\x20\x31\x35\x70\x78\x22\x3E\x7B\x70\x6F\x69\x6E\x74\x2E\x6B\x65\x79\x7D\x3C\x2F\x73\x6D\x61\x6C\x6C\x3E\x3C\x74\x61\x62\x6C\x65\x3E","\x3C\x74\x72\x3E\x3C\x74\x64\x20\x73\x74\x79\x6C\x65\x3D\x22\x63\x6F\x6C\x6F\x72\x3A\x20\x7B\x73\x65\x72\x69\x65\x73\x2E\x63\x6F\x6C\x6F\x72\x7D\x22\x3E\x7B\x73\x65\x72\x69\x65\x73\x2E\x6E\x61\x6D\x65\x7D\x20\x3C\x2F\x74\x64\x3E","\x3C\x74\x64\x20\x73\x74\x79\x6C\x65\x3D\x22\x74\x65\x78\x74\x2D\x61\x6C\x69\x67\x6E\x3A\x20\x6C\x65\x66\x74\x22\x3E\x3C\x62\x3E\x7B\x70\x6F\x69\x6E\x74\x2E\x79\x7D\x3C\x2F\x62\x3E\x3C\x2F\x74\x64\x3E\x3C\x2F\x74\x72\x3E","\x3C\x2F\x74\x61\x62\x6C\x65\x3E","\x63\x6F\x6C\x75\x6D\x6E","\x20\x20\uB9E4\uCD9C\uC561","\u20A9","\x23\x45\x43\x45\x39\x46\x31","\x73\x70\x6C\x69\x6E\x65","\x20\x20\uD310\uB9E4\uAC74\uC218","\x61\x70\x70\x6C\x69\x63\x61\x74\x69\x6F\x6E\x2F\x6A\x73\x6F\x6E","\x74\x6F\x6B\x65\x6E\x2D\x75\x73\x65\x72","\x67\x65\x74\x49\x74\x65\x6D","\x2F\x70\x72\x6F\x64\x75\x63\x74\x2F\x64\x65\x74\x61\x69\x6C\x2F\x6D\x61\x72\x6B\x65\x74\x73\x61\x6C\x65\x73\x74\x61\x74\x75\x73\x3F\x6D\x61\x72\x6B\x65\x74\x3D","\x6D\x61\x72\x6B\x65\x74","\x26\x70\x72\x6F\x64\x75\x63\x74\x49\x64\x3D","\x70\x72\x6F\x64\x75\x63\x74\x49\x64","\x26\x79\x65\x61\x72\x3D","\x67\x65\x74","\x73\x74\x61\x74\x75\x73","\x72\x65\x73\x75\x6C\x74","\x64\x61\x74\x61","\x72\x65\x73\x70\x6F\x6E\x73\x65","\x73\x74\x61\x74\x75\x73\x54\x65\x78\x74","\x55\x6E\x61\x75\x74\x68\x6F\x72\x69\x7A\x65\x64","\x63\x6C\x65\x61\x72","\x2F","\x70\x75\x73\x68","\x68\x69\x73\x74\x6F\x72\x79"];const [data,setData]=useState([]);const [spinning,setSpinning]=useState(false);useEffect(()=>{getData()},[props[_0xca6a[0]]]);const convertData=(_0xb756x2,_0xb756x3,_0xb756x4)=>{const _0xb756x5=[_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1],_0xca6a[1]];if(_0xb756x3){_0xb756x2[_0xca6a[5]]((_0xb756x6)=>{let _0xb756x7=parseInt(_0xb756x6[_0xca6a[2]]);if(_0xb756x7== 1){_0xb756x5[0]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 2){_0xb756x5[1]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 3){_0xb756x5[2]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 4){_0xb756x5[3]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 5){_0xb756x5[4]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 6){_0xb756x5[5]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 7){_0xb756x5[6]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 8){_0xb756x5[7]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 9){_0xb756x5[8]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 10){_0xb756x5[9]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 11){_0xb756x5[10]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}};if(_0xb756x7== 12){_0xb756x5[11]= {y:parseInt(_0xb756x6[_0xca6a[3]]),name:_0xb756x6[_0xca6a[4]]}}})};if(_0xb756x4){_0xb756x2[_0xca6a[5]]((_0xb756x6)=>{let _0xb756x7=parseInt(_0xb756x6[_0xca6a[2]]);if(_0xb756x7== 1){_0xb756x5[0]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 2){_0xb756x5[1]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 3){_0xb756x5[2]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 4){_0xb756x5[3]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 5){_0xb756x5[4]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 6){_0xb756x5[5]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 7){_0xb756x5[6]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 8){_0xb756x5[7]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 9){_0xb756x5[8]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 10){_0xb756x5[9]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 11){_0xb756x5[10]= parseInt(_0xb756x6[_0xca6a[6]])};if(_0xb756x7== 12){_0xb756x5[11]= parseInt(_0xb756x6[_0xca6a[6]])}})};return _0xb756x5};const optionsLineAndColumnChart={title:_0xca6a[1],chart:{zoomType:_0xca6a[7],width:420},xAxis:{categories:[1,2,3,4,5,6,7,8,9,10,11,12],labels:{formatter:function(){return this[_0xca6a[8]]+ _0xca6a[9]}}},yAxis:[{labels:false,title:false,gridLineColor:_0xca6a[10]},{title:false,labels:false,opposite:true,gridLineColor:_0xca6a[10]}],tooltip:{shared:true},credits:{enabled:false},legend:false,plotOptions:{column:{states:{hover:{color:_0xca6a[11]}}},series:{marker:{enabled:false},lineWidth:6}},tooltip:{shared:true,useHTML:true,headerFormat:_0xca6a[12],pointFormat:_0xca6a[13]+ _0xca6a[14],footerFormat:_0xca6a[15]},series:[{name:_0xca6a[1],type:_0xca6a[16],yAxis:1,data:convertData(data,true,false),tooltip:{valueSuffix:_0xca6a[17],valuePrefix:_0xca6a[18]},color:_0xca6a[19]},{name:_0xca6a[1],type:_0xca6a[20],data:convertData(data,false,true),tooltip:{valueSuffix:_0xca6a[21]}}]};const getData=async ()=>{setSpinning(true);const _0xb756xa=moment()[_0xca6a[0]]();const _0xb756xb={headers:{Accept:_0xca6a[22],'\x43\x6F\x6E\x74\x65\x6E\x74\x2D\x54\x79\x70\x65':_0xca6a[22],'\x58\x2D\x41\x75\x74\x68\x2D\x54\x6F\x6B\x65\x6E':localStorage[_0xca6a[24]](_0xca6a[23])}};try{const _0xb756xc= await axios[_0xca6a[30]](`${_0xca6a[1]}${API_URL}${_0xca6a[25]}${props[_0xca6a[26]]}${_0xca6a[27]}${props[_0xca6a[28]]}${_0xca6a[29]}${props[_0xca6a[0]]?props[_0xca6a[0]]:_0xb756xa}${_0xca6a[1]}`,_0xb756xb);if(_0xb756xc[_0xca6a[31]]== 200){setData(_0xb756xc[_0xca6a[33]][_0xca6a[33]][_0xca6a[32]])}}catch(error){if(error&& error[_0xca6a[34]]&& error[_0xca6a[35]]){if(error[_0xca6a[34]][_0xca6a[35]]== _0xca6a[36]){localStorage[_0xca6a[37]]();props[_0xca6a[40]][_0xca6a[39]](_0xca6a[38])}}};setSpinning(false)}

  return (
    <div>
      <Spin tip="Loading..." spinning={spinning}>
        <HighchartsReact
          highcharts={Highcharts}
          options={optionsLineAndColumnChart}
          {...props}
        />
        <div className="market">{props.market}</div>
      </Spin>
    </div>
  )
}

export default MarketSaleStatusChart
